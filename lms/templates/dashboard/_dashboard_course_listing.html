<%page args="course, enrollment, show_courseware_link, cert_status, show_email_settings, course_mode_info, show_refund_option, is_paid_course, is_course_blocked, verification_status, course_requirements, dashboard_index, share_settings" />

<%!
import urllib

from django.utils.translation import ugettext as _
from django.utils.translation import ungettext
from django.core.urlresolvers import reverse
from markupsafe import escape
from courseware.courses import course_image_url, get_course_about_section
from course_modes.models import CourseMode
from student.helpers import (
  VERIFY_STATUS_NEED_TO_VERIFY,
  VERIFY_STATUS_SUBMITTED,
  VERIFY_STATUS_APPROVED,
  VERIFY_STATUS_MISSED_DEADLINE,
  VERIFY_STATUS_NEED_TO_REVERIFY
)
%>

<%
  cert_name_short = course.cert_name_short
  if cert_name_short == "":
    cert_name_short = settings.CERT_NAME_SHORT

  cert_name_long = course.cert_name_long
  if cert_name_long == "":
    cert_name_long = settings.CERT_NAME_LONG
  billing_email = settings.PAYMENT_SUPPORT_EMAIL
%>

<%namespace name='static' file='../static_content.html'/>

<% course_target = reverse('info', args=[unicode(course.id)]) %>

<style type="text/css">
 article.course .icon1 {
		display:block;
		width:56px;
		height:73px;
		background:url('/static/themes/default/images/application/icon_certificate.png') no-repeat 0 0;
		background-size:100% 100%;
		position:absolute;
		top: 26px;
		right: -3px;
	}
 article.course .icon2 {
		display:block;
		width:56px;
		height:73px;
		background:url('/static/themes/default/images/application/icon_confirmation.png') no-repeat 0 0;
		background-size:100% 100%;
		position:absolute;
		top: 26px;
		right: -3px;
	}
article.course h3 {max-width:477px}
.dashboard .my-courses .course .info .enter-course:focus:not(:disabled) {
  border: 0;
  box-shadow: none;
</style>

<li class="course-item">
        <article class="course">
                <div class="cover">
                        <img src="${course_image_url(course)}" alt="${_('{course_number} {course_name} Home Page').format(course_number=course.number, course_name=course.display_name_with_default) |h}" />
                </div>
                <section class="info">
                        <hgroup>
                                <p class="date-block">
          % if course.has_ended():
            ${_("Ended - {end_date}").format(end_date=course.end_datetime_text("SHORT_DATE"))}
          % elif course.has_started():
            ${_("Started - {start_date}").format(start_date=course.start_datetime_text("SHORT_DATE"))}
          % elif course.start_date_is_still_default: # Course start date TBD
            ${_("Coming Soon")}
          % else:   # hasn't started yet
            ${_("Starts - {start_date}").format(start_date=course.start_datetime_text("SHORT_DATE"))}
          % endif

                                </p>
                                <h2 class="university">${course.display_number_with_default | h}<span>${get_course_about_section(course, 'university')}</span></h2>
                                <h3>
                                        <span>${course.display_name_with_default}</span>
                                </h3>
                        </hgroup>
                        % if show_courseware_link:
                        <a href="${course_target}" class="enter-course">강의듣기</a>
                        % else:
                        <a href="javascript:divShow('${course.start_datetime_text("SHORT_DATE")}');" class="enter-course">
                            강의듣기</a>
                        % endif
						<a href="#" class="enter-course" style="margin-left:10px;background:#ccc">수료증보기</a>
                </section>


				<!--공식 수료증 아이콘-->
				<!--<span class="icon1"></span>-->

				<!--수강 확인증 아이콘-->
				<span class="icon2"></span>
        </article>
</li>


<script type="text/javascript">

    function divShow(startDt) {
        $(".instructions").html("<p>개강일은 "+startDt+"입니다.</p>");
		$("#lean_overlay").show();

		$("#forgot-password-modal").css({'top': Math.max(0, (($(window).height() - $("#forgot-password-modal").outerHeight()) / 2) + $(window).scrollTop()) + "px"});
		$("#forgot-password-modal").show();
    }

	function divHide(){
		$("#lean_overlay").hide();
		$("#forgot-password-modal").hide();
	}
</script>

<div id="lean_overlay" style="opacity: 1;"></div>
<section id="forgot-password-modal" class="modal" role="dialog" tabindex="-1" aria-label="Password Reset" style="position:absolute;top:50%;left:50%;margin-left:-250px;margin-top:-50px;z-index:1000;">
  <div class="inner-wrapper">
    <button class="close-modal" onclick="divHide();">
      <i class="icon fa fa-remove"></i>
      <span class="sr" >
        Close
      </span>
    </button>
	<header style="padding-bottom:0;margin-bottom:10px">
      <h2 style="color: #2e2e2e;font-family: 'NanumBarunGothic' !important;margin-bottom: 10px;">알림</h2>
      <hr>
    </header>
	<div id="password-reset" style="text-align: center;">
      <form> <!-- Here for styling reasons -->
        <section class="instructions">
          <p>이메일은 zudain@naver.com으로 전송되었습니다.<br>비밀번호를 변경하려면 이메일에 있는 링크를 따르십시오.</p>
        </section>
      </form>
    </div>    
  </div>
</section>

<script>
           $( document ).ready(function() {

               if("${is_course_blocked}" == "True"){
                   $( "#unregister_block_course" ).click(function() {
                       $('.disable-look-unregister').click();
                   });
               }
           });

           function set_unenroll_message(track_info, refund_info) {
               document.getElementById('track-info').innerHTML = interpolate(track_info, {course_number: "<span id='unenroll_course_number'></span>"}, true);
               document.getElementById('refund-info').innerHTML = refund_info;
           }
</script>
